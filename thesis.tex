\documentclass[12pt]{scrbook}

\usepackage[british]{babel}
\usepackage{scrlayer-scrpage}
\usepackage{csquotes}
\usepackage{microtype}
\usepackage{balance}
\usepackage{subcaption}
\usepackage{tikz}
\usetikzlibrary{arrows.meta, fit, shapes}
\usepackage{listings}
\usepackage{hyperref}
\usepackage{newunicodechar}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{upgreek}

% Listings

\definecolor{keywordcolor}{rgb}{0.7, 0.1, 0.1}   % red
\definecolor{commentcolor}{rgb}{0.4, 0.4, 0.4}   % grey
\definecolor{symbolcolor}{rgb}{0.0, 0.1, 0.6}    % blue
\definecolor{sortcolor}{rgb}{0.1, 0.5, 0.1}      % green
\definecolor{errorcolor}{rgb}{1, 0, 0}           % bright red
\definecolor{stringcolor}{rgb}{0.5, 0.3, 0.2}    % brown

\def\lstlanguagefiles{lstlean.tex}
\lstset{language=lean}
\lstdefinestyle{leannocolor}{
  basicstyle={\ttfamily},
  identifierstyle={\ttfamily},
  keywordstyle=[1]{\ttfamily},
  keywordstyle=[2]{\ttfamily},
  keywordstyle=[3]{\ttfamily},
  stringstyle={\ttfamily},
  commentstyle={\ttfamily}
}
\lstMakeShortInline[style=leannocolor]|

% Headers

\ohead{\headmark}

% Hyphenation

\hyphenation{meta-va-ri-able meta-va-ri-ables us-abil-i-ty gen-er-al-i-sa-tion
  none-the-less semi-group semi-groups rel-a-tive in-duc-tive rel-e-vant
  tran-si-tive-ly nor-ma-li-sa-tion de-fi-ni-tion de-fi-ni-tions no-ta-bly}

% Unicode

\newunicodechar{¬}{\ensuremath{\lnot}}
\newunicodechar{∧}{\ensuremath{\land}}
\newunicodechar{∨}{\ensuremath{\lor}}
\newunicodechar{⊢}{\ensuremath{\vdash}}
\newunicodechar{∀}{\ensuremath{\forall}}
\newunicodechar{∃}{\ensuremath{\exists}}
\newunicodechar{⊥}{\ensuremath{\bot}}
\newunicodechar{⊤}{\ensuremath{\top}}
\newunicodechar{→}{\ensuremath{\rightarrow}}
\newunicodechar{↔}{\ensuremath{\leftrightarrow}}
\newunicodechar{×}{\ensuremath{\times}}
\newunicodechar{ℕ}{\ensuremath{\mathbb{N}}}
\newunicodechar{ℤ}{\ensuremath{\mathbb{Z}}}
\newunicodechar{ℝ}{\ensuremath{\mathbb{R}}}
\newunicodechar{ℚ}{\ensuremath{\mathbb{Q}}}
\newunicodechar{≠}{\ensuremath{\neq}}
\newunicodechar{≤}{\ensuremath{\leq}}
\newunicodechar{≥}{\ensuremath{\geq}}
\newunicodechar{∈}{\ensuremath{\in}}
\newunicodechar{∉}{\ensuremath{\notin}}
\newunicodechar{α}{\ensuremath{\alpha}}
\newunicodechar{β}{\ensuremath{\beta}}
\newunicodechar{γ}{\ensuremath{\gamma}}
\newunicodechar{δ}{\ensuremath{\delta}}
\newunicodechar{ε}{\ensuremath{\varepsilon}}
\newunicodechar{φ}{\ensuremath{\phi}}
\newunicodechar{ψ}{\ensuremath{\psi}}
\newunicodechar{π}{\ensuremath{\pi}}
\newunicodechar{σ}{\ensuremath{\sigma}}
\newunicodechar{Γ}{\ensuremath{\Gamma}}
\newunicodechar{Δ}{\ensuremath{\Delta}}
\newunicodechar{Φ}{\ensuremath{\Phi}}
\newunicodechar{Ψ}{\ensuremath{\Psi}}
\newunicodechar{₁}{\ensuremath{_{1}}}
\newunicodechar{₂}{\ensuremath{_{2}}}
\newunicodechar{₃}{\ensuremath{_{3}}}
\newunicodechar{₄}{\ensuremath{_{4}}}
\newunicodechar{₅}{\ensuremath{_{5}}}
\newunicodechar{₆}{\ensuremath{_{6}}}
\newunicodechar{₇}{\ensuremath{_{7}}}
\newunicodechar{₈}{\ensuremath{_{8}}}
\newunicodechar{₉}{\ensuremath{_{9}}}
\newunicodechar{₀}{\ensuremath{_{0}}}

% Title page

\newcommand{\LMUTitle}[9]{
  \thispagestyle{empty}
  \vspace*{\stretch{1}}
  {\parindent0cm
   \rule{\linewidth}{.7ex}}
  \begin{flushleft}

    \vspace*{\stretch{1}}
    \sffamily\bfseries\Huge
    #1\\
    \vspace*{\stretch{1}}
    \sffamily\bfseries\large
    #2
    \vspace*{\stretch{1}}
  \end{flushleft}
  \rule{\linewidth}{.7ex}
  \vspace*{\stretch{5}}
  \begin{center}
    \includegraphics[width=2in]{sigil}
  \end{center}
  \vspace*{\stretch{1}}
  \begin{center}\sffamily\LARGE{#4}\end{center}
  \newpage
  \thispagestyle{empty}

  \cleardoublepage
  \thispagestyle{empty}

  \vspace*{\stretch{1}}
  {\parindent0cm
  \rule{\linewidth}{.7ex}}
  \begin{flushleft}
    \vspace*{\stretch{1}}
    \sffamily\bfseries\Huge
    #1\\
    \vspace*{\stretch{1}}
    \sffamily\bfseries\large
    #2
    \vspace*{\stretch{1}}
  \end{flushleft}
  \rule{\linewidth}{.7ex}

  \vspace*{\stretch{3}}
  \begin{center}
    \Large Dissertation\\
    \Large submitted to the\\
    #3\\
    \Large of Ludwig--Maximilians--Universität\\
    \Large M\"unchen\\
    \vspace*{\stretch{1}}
    \Large submitted by\\
    \Large #2\\
    \vspace*{\stretch{2}}
    \Large Munich, #5
  \end{center}

  \newpage
  \thispagestyle{empty}

  \vspace*{\stretch{1}}

  \begin{flushleft}
    \large Erstgutachter:  #6 \\[1mm]
    \large Zweitgutachter: #7 \\[1mm]
    \large Tag der m\"undlichen Pr\"ufung: #8\\
  \end{flushleft}

  \cleardoublepage
}

% Document

\begin{document}
  \pagenumbering{gobble}
  \frontmatter
  \LMUTitle
      {Aesop\\White-Box Proof Automation for Lean}
      {Jannis Limperg}
      {Faculty of Mathematics, Computer Science and Statistics}
      {Munich 2025}
      {TODO Abgabedatum}
      {TODO Erstgutachter}
      {TODO Zweitgutachter}
      {TODO Prüfungsdatum}

  \pagenumbering{roman}
  \tableofcontents

  \mainmatter%
  \pagenumbering{arabic}

  \include{intro}
  \newpage
  \include{background}
  \newpage
  \include{aesop}
  \newpage
  \include{forward}
  \newpage
  \include{script}

  \backmatter
  \bibliographystyle{plain}
  \bibliography{lit}
\end{document}
